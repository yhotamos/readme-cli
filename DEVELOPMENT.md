# DEVELOPMENT.md

## プロジェクト概要

このプロジェクトは，Markdownやブログ記事の読み時間を推定するNode.js製のコマンドラインインターフェース（CLI）ツールです．

## 技術スタック

- **言語**: TypeScript
- **ランタイム**: Node.js
- **パッケージマネージャー**: npm

## 開発環境のセットアップ

1.  **依存関係のインストール**:
    プロジェクトのルートディレクトリで以下のコマンドを実行し，必要な依存関係をインストールします．

    ```bash
    npm install
    ```

2.  **開発用リンクの作成（`npm link`）**:
    開発中にCLIツールをテストするために，`npm link`を使用します．これにより，グローバルにインストールされたかのように，ローカルのプロジェクトをテストできます．

    プロジェクトのルートディレクトリで実行します．

    ```bash
    npm link
    ```

    これにより，システム上のどこからでも`readtime`コマンドを実行できるようになります．コードを変更した際は，再度`npm run build`を実行するだけで，変更が反映されます．

## ビルド

TypeScriptソースコードをJavaScriptにコンパイルするには，以下のコマンドを実行します．

```bash
npm run build
```

コンパイルされたJavaScriptファイルは`dist/`ディレクトリに出力されます．

## 実行

ビルド後，CLIツールは以下のいずれかの方法で実行できます．

-   **開発中（`npm link`を使用）**:

    ```bash
    readtime
    ```

-   **直接実行（Node.jsを使用）**:

    ```bash
    node dist/index.js
    ```

## `package.json`の`bin`フィールドと`npm link`について

-   **`"bin": { "readtime": "./bin/readtime.js" }`**: この設定は，npmに対して，このパッケージがグローバルインストールされた際に`readtime`というコマンド名で`./bin/readtime.js`を実行可能にするよう指示します．`./bin/readtime.js`は，コンパイルされた`dist/index.js`を読み込むラッパースクリプトです．

-   **`npm link`**: 開発中に，パッケージを実際にグローバルインストールすることなく，ローカル環境でグローバルインストールされたかのようにテストするためのコマンドです．これにより，開発サイクルが短縮され，効率的なテストが可能になります．
